package main

import (
	"code.galaxy-future.com/dtexpress/encryptpkg/encryptpkg"
	"fmt"
	"os"
	"testing"
)

func main() {
	/*
		var str = []byte("Hi,helloï¼Œä¸­å›½ï¼Œâ¤ï¸")

		// åŠ å¯†
		aesEncryptBase64, err := encryptpkg.AesEncryptBase64(str)
		if err != nil {
			fmt.Println("åŠ å¯†å¤±è´¥ error:", err)
		}
		fmt.Println("åŠ å¯†å¯†æ–‡æ˜¯:", aesEncryptBase64)

		// è§£å¯†å­—ç¬¦ä¸²
		bytes, err := encryptpkg.AesDecryptBase64(aesEncryptBase64)
		if err != nil {
			fmt.Println("è§£å¯† error:", err)
		}
		fmt.Println("æ˜Žæ–‡æ˜¯ï¼š", string(bytes))

		// æ–‡ä»¶åŠ å¯†
		err = encryptpkg.EncryptFile("go.mod", "go.mod.encrypt")
		if err != nil {
			fmt.Println("file encrypt error:", err)
		}

		// æ–‡ä»¶è§£å¯†
		err = encryptpkg.DecryptFile("go.mod.encrypt", "go.mod1")
		if err != nil {
			fmt.Println("file decrypt file error:", err)
		}

	*/

	/*
		bytesSum, err := encryptpkg.BytesSum([]byte("aaa bbb"))
		bytesSum, err = encryptpkg.BytesSum([]byte("eee 111"))
		bytesSum, err = encryptpkg.BytesSum([]byte(",,a 234"))
		fmt.Println("sum ç¼“å†²å’Œ:", bytesSum, err)
	*/

	/*	str := []byte("hello,é˜¿é‡Œï¼Œ123@qq.com â™¥ï¸")
		ciphertext, _ := encryptpkg.EncryptBytes(str, "AES", encryptpkg.GetCipherKey())
		fmt.Println("å¯†æ–‡:", ciphertext, "é•¿åº¦ï¼š", len(ciphertext), len([]byte(ciphertext)))

		// è§£å¯†
		cont, _ := encryptpkg.DecryptBytes([]byte(ciphertext), "AES", encryptpkg.GetCipherKey())
		fmt.Println("è§£å¯†åŽï¼š", string(cont))
	*/
}

func TestEncryptBytes(t *testing.T) {
	str := []byte("ä¸­å›½ðŸš©hello,é˜¿é‡Œï¼Œ123@qq.com â™¥ï¸")
	ciphertext, err := encryptpkg.EncryptBytes(str, "AES", encryptpkg.GetCipherKey())

	fmt.Println("å¯†æ–‡:", ciphertext, "é•¿åº¦ï¼š", len(ciphertext), "byte len:", len([]byte(ciphertext)), "error:", err)

	bytes, err := encryptpkg.DecryptBytes([]byte(ciphertext), encryptpkg.ENCRYPT_MODE_AES, encryptpkg.GetCipherKey())

	fmt.Println("è§£å¯†ï¼š", string(bytes), err)
}

func TestEncryptByPos(t *testing.T) {

	//str := []byte("ä¸­å›½ðŸ‡¨ðŸ‡³qq:@ä½ åœ¨å“ªï¼Ÿ 123@qq.com;ðŸ‘")
	//fmt.Println("åŽŸå§‹å†…å®¹ï¼š", string(str))
	cFile, _ := os.Open("c.log")
	buf := make([]byte, 3528)
	cFile.Read(buf)

	encryptBytes, _ := encryptpkg.EncryptByPos(buf, encryptpkg.ENCRYPT_MODE_AES, encryptpkg.GetCipherKey())

	file, _ := os.OpenFile("a.txt", os.O_RDWR, os.ModePerm)
	bytes := []byte(string(encryptBytes))
	file.Write(bytes)

	//fmt.Println("å¯†æ–‡ï¼š", string(encryptBytes))

	runes, _ := encryptpkg.DecryptByPos(encryptBytes, encryptpkg.ENCRYPT_MODE_AES, encryptpkg.GetCipherKey())
	//fmt.Println("è§£å¯†ï¼š", string(runes))
	file1, err := os.OpenFile("b.txt", os.O_RDWR, os.ModePerm)
	file1.Write(runes)

	fmt.Println("file1 error:", err)
}

func TestAb(t *testing.T) {
	bytes := []byte("å‘¨ä¸€ä¸­å›½ðŸ‡¨ðŸ‡³qq:@ä½ åœ¨å“ªï¼Ÿ 123@qq.com;ðŸ‘å’Œæœ‹å‹åƒé¥­ã€‚snerer !erer @#$#%$%%$% ðŸ˜Š å¯èƒ½æ¯”è¶´åœ¨ç¬¼å­é‡Œè·ç¦»è‡ªå·±çš„ç²ªä¾¿åªæœ‰äº”åŽ˜ç±³è¦å¼€å¿ƒä¸€ç‚¹ ðŸ‡¨ðŸ‡³ ï¼Ÿ 2334 ðŸš©\nåƒç€åƒç€æƒ³ä¹°ç‹—ã€‚\nå½“ç„¶ä¸æ˜¯å› ä¸ºåƒé¥­æƒ³ä¹°ç‹—ï¼\nä¸»è¦æ˜¯èŠåˆ°å®¶æ¯é€€ä¼‘ä¹‹åŽæ— äº‹å¯åšï¼Œè‡ªå·±åˆä¸èƒ½å¤©å¤©é™ªä¼´ï¼Œä¸å¦‚è¯·ä¸€æ¡æ‡‚äº‹çš„å°ç‹—ï¼Œä¼šå–èŒï¼Œåˆå¬è¯ï¼Œåƒçš„æ¯”äººå°‘ï¼Œè¿˜ä¸æ„æ‰¾å¯¹è±¡ï¼Œè‚¯å®šæ¯”æˆ‘ä»¬è®¨å®¶é•¿æ¬¢å¿ƒã€‚\nè¯´èµ°å°±èµ°ï¼Œåƒå®Œé¥­ç›´æŽ¥åŽ»äº†ç‹—å¸‚ã€‚\nä¸çŸ¥é“æˆ‘ä»¬æ˜¯ä¸æ˜¯å¤©ç”Ÿå°±æœ‰æ‹›çŒ«é€—ç‹—ä½“è´¨ï¼Œä¸€å®¶å®¶å® ç‰©åº—é€›è¿‡åŽ»ï¼Œåªè¦æˆ‘ä»¬ä¸€è¿›é—¨ï¼Œé‚£ç»å¯¹æ˜¯é”£é¼“å–§å¤©çŒ«ç‹—é½é¸£ï¼Œæ‰€æœ‰å››æ¡è…¿çš„éƒ½ç«™èµ·æ¥ï¼Œåˆè¹­ç¬¼å­åˆå«å”¤ï¼Œé—¹å¾—åº—ä¸»æ— å¿ƒçŽ©æ‰‹æœºï¼Œä¸å¾—ä¸æŠ¬çœ¼çœ‹çœ‹æˆ‘ä»¬ã€‚\nè‹¹æžœCEOåº“å…‹å®£å¸ƒå°†ä¸ºå±±è¥¿ææ¬¾ï¼Œä»¥æ­¤å¸®åŠ©ç¾åŒºé‡å»ºå·¥ä½œã€‚\nä»Šå¤©åˆé—´ï¼Œè‹¹æžœCEOåº“å…‹å®£å¸ƒå°†ä¸ºå±±è¥¿ææ¬¾ï¼Œä»¥æ­¤å¸®åŠ©å—å½±å“çš„ç¤¾åŒºï¼Œæ”¯æŒæ•‘ç¾ï¼Œå¸®åŠ©é‡å»ºå·¥ä½œï¼\nåº“å…‹è¡¨ç¤ºï¼Œéšç€å±±è¥¿åœ°åŒºé€æ­¥å¤è‹ï¼Œæˆ‘ä»¬æƒ³è¦å°½è‡ªå·±çš„ä¸€ä»½åŠ›é‡æ¥æ”¯æŒæ•‘ç¾ï¼Œå¸®åŠ©é‡å»ºï¼ŒAppleå°†ææ¬¾å¸®åŠ©å—å½±å“çš„ç¤¾åŒºã€‚\næ®æ‚‰ï¼Œè‹¹æžœå‘æ¥å¯¹æˆ‘ä»¬å›½å†…çš„å‘å±•ååˆ†çš„å…³æ³¨ï¼Œå°¤å…¶æ˜¯ç»åŽ†å›°éš¾çš„æ—¶å€™ï¼Œè‹¹æžœæ€»èƒ½å¤ŸåŠæ—¶ç«™å‡ºæ¥ä¼¸å‡ºæ´æ‰‹ï¼Œæ­¤å‰éƒ‘å·žç¾æƒ…ï¼Œåº“å…‹åŒæ ·è¡¨è¾¾äº†è‡ªå·±çš„æ‹…å¿§ï¼Œå¹¶å®£å¸ƒäº†ææ¬¾ã€‚\nä¸‰åä¸€ã€ä¸æ±‚ä¸Žäººç›¸æ¯”ï¼Œä½†æ±‚è¶…è¶Šè‡ªå·±ã€‚ä¸Žå…¶ç”¨æ³ªæ°´æ‚”æ¨ä»Šå¤©ï¼Œä¸å¦‚ç”¨æ±—æ°´æ‹¼æä»Šå¤©ã€‚å½“çœ¼æ³ªæµå°½çš„æ—¶å€™ï¼Œç•™ä¸‹çš„åº”è¯¥æ˜¯åšå¼ºã€‚é€‰æ‹©è‡ªå·±æ‰€çˆ±çš„ï¼Œçˆ±è‡ªå·±æ‰€é€‰æ‹©çš„ã€‚è¿™ä¸€ç§’ä¸æ”¾å¼ƒï¼Œä¸‹ä¸€ç§’å°±æœ‰å¸Œæœ›ã€‚æ²¡æœ‰äººé™ªä½ èµ°ä¸€è¾ˆå­ï¼Œæ‰€ä»¥ä½ è¦é€‚åº”å­¤ç‹¬ï¼Œæ²¡æœ‰äººä¼šå¸®ä½ ä¸€è¾ˆå­ï¼Œæ‰€ä»¥ä½ è¦å¥‹æ–—ä¸€ç”Ÿã€‚\n\nä¸‰åäºŒã€ç”Ÿæ´»ä¸­æœ‰å¤ªå¤šäº‹æƒ…ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠžæ³•è®©å®ƒåœç•™ï¼Œä¹Ÿæ²¡åŠžæ³•è®©å®ƒç¦»å¼€ã€‚\n\nä¸‰åä¸‰ã€ä¸€ä¸ªäººèº«è¾¹çš„ä½ç½®åªæœ‰é‚£ä¹ˆå¤šï¼Œä½ èƒ½ç»™çš„ä¹Ÿåªæœ‰é‚£ä¹ˆå¤šï¼Œåœ¨è¿™ä¸ªç‹­å°çš„åœˆå­é‡Œï¼Œæœ‰äº›äººè¦è¿›æ¥ï¼Œå°±æœ‰ä¸€äº›äººä¸å¾—ä¸ç¦»å¼€ã€‚\n\nä¸‰åå››ã€å¹´é¾„è¶Šå¤§ï¼Œè¶Šå­¦ä¼šäº†é¡ºå…¶è‡ªç„¶ï¼Œä¸æƒ³å†æŒ½ç•™ä»€ä¹ˆï¼Œç›¸ä¿¡è¯¥åœ¨çš„ä¸ä¼šèµ°ã€‚\n\nä¸‰åäº”ã€æœ‰æ—¶å€™ï¼Œå¤±æœ›åˆ°äº†ä¸€å®šçš„ç¨‹åº¦åŽï¼Œåè€Œä¼šå¼€å‡ºä¸€æœµèŠ±æ¥ï¼Œé‚£æœµèŠ±çš„åå­—å«ï¼Œæ— æ‰€è°“ã€‚\n\nä¸‰åå…­ã€æˆ‘ä¼šè®©ä½ æ¯”æˆ‘å…ˆèµ°ï¼Œå¸®ä½ å®‰è‘¬ï¼Œè®©ä½ å®‰å¿ƒã€‚æŠŠç—›è‹¦ç•™ç»™æˆ‘ï¼ŒæŠŠå¯‚å¯žç•™ç»™æˆ‘ã€‚è¿™ï¼Œå°±æ˜¯æˆ‘ç–¼ä½ çš„æ–¹å¼\n\nä¸€ã€ä¾èµ–çš„æ—¶å€™æœ‰å¤šå®‰é€¸ï¼Œå¤±åŽ»çš„æ—¶å€™å°±æœ‰å¤šç—›è‹¦ã€‚\n\näºŒã€å“ªæ€•æˆ‘ä»¬æ²¡æœ‰ç»“æžœï¼Œåœ¨è¿™è¿‡ç¨‹é‡Œæˆ‘ä¹Ÿä¼šå…¨åŠ›ä»¥èµ´ï¼Œç»™ä½ è‡ªç”±ï¼Œç»™ä½ æˆ‘èƒ½ç»™çš„ï¼Œç»™ä½ æˆ‘èƒ½åšåˆ°çš„ï¼Œå¦‚æžœä¸å¹¸ä½ æŠ›å¼ƒæˆ‘äº†ï¼Œé‚£å°±ç»™ä½ ä¸€ä¸ªåŽæ‚”çš„å¿µå¤´ï¼Œç»™æˆ‘è‡ªå·±ä¸€ä¸ªä¸åŽæ‚”çš„ç†ç”±ã€‚\n\nä¸‰ã€æˆ‘çˆ±çš„äººå¦‚è¦ç¦»å¼€ï¼Œæˆ‘å®šåªä¼šè¯´ä¸¤ä¸ªå­—ï¼šå¥½çš„ã€‚ç»å£ä¸é—®ä½ æ€Žä¹ˆè¿™æ ·å¯¹æˆ‘ã€‚ä½ ä¸ç†æˆ‘ï¼Œæˆ‘ä¹Ÿä¸ä¼šå¤šè¯´ï¼›ä½ è‹¥çˆ±æˆ‘ï¼Œæˆ‘ä¾¿çˆ±ä½ æ›´å¤šã€‚æœ€å¥½çš„çˆ±æƒ…è§‚å°±æ˜¯æ·±æƒ…è€Œä¸çº ç¼ ã€‚\n\nå››ã€å¤±åŽ»ä¸€åˆ‡å¹¶ä¸å¯æ€•ï¼Œæ€•åªæ€•æˆ‘ä»¬æŠµæŠ—ä¸è¿‡å›žå¿†ã€‚\n\näº”ã€ä½ çš„ä¸–ç•Œæ²¡æœ‰ç«¥è¯é•‡é‡Œçš„ç¾Žå¥½ï¼Œæœ‰çš„åªæ˜¯æ²¹ç›æŸ´ç±³çš„å¹³å‡¡ï¼Œå¯æ˜¯æˆ‘å´å¾ˆå–œæ¬¢ã€‚\n\näºŒåå››ã€å¿ƒè‹¥æ²¡æœ‰äº†å½’å®¿ï¼Œåˆ°å“ªé‡Œéƒ½æ˜¯æµæµªã€‚åœ¨æŸä¸€åˆ»ï¼Œä½ æœ‰æ²¡æœ‰å¾ˆæƒ³ï¼Œå›žåˆ°æŸå¹´æŸæœˆçš„æŸå¤©ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯æ”¾ä¸ä¸‹é‚£ä¸ªäººï¼Œè€Œæ˜¯æ”¾ä¸ä¸‹é‚£ä»½å›žå¿†ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘çœ‹èµ·æ¥æ²¡å¿ƒæ²¡è‚ºï¼Œä½†å…¶å®žæ¯”è°éƒ½çœŸå¿ƒçœŸæ„ã€‚\n\näºŒåäº”ã€ä½ å†™å‡ºçš„æ¯ä¸€å¥ç¦»åˆ«è¯—è¯å…¨è£…åœ¨æˆ‘å¿ƒé‡Œï¼Œæˆ‘ç”¨æ³ªæ°´æµ‡çŒï¼Œç„¶åŽç”Ÿæ ¹å‘èŠ½ï¼Œæˆé•¿ä¸ºæ¼«å±±éé‡Žçš„ç›¸æ€è‰>ã€‚")
	fmt.Println("len:", len(bytes), len([]rune(string(bytes))))
}
